# git-multi-sync-tool

ä¸€ä¸ªå¼ºå¤§çš„ Git å¤šä»“åº“åŒæ­¥å·¥å…· - åŸºäºæ–‡æœ¬é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒä¸€é”®æ¨é€åˆ°å¤šä¸ªè¿œç¨‹ä»“åº“

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“ **åŸºäºæ–‡æœ¬é…ç½®**ï¼šä½¿ç”¨ç®€å•çš„ `.git-remotes.txt` æ–‡ä»¶ç®¡ç†å¤šä¸ªè¿œç¨‹ä»“åº“
- ğŸŒ **å¤šä»“åº“åŒæ­¥**ï¼šä¸€é”®å°†ä»£ç åŒæ­¥åˆ° GitHubã€Giteeã€GitLab ç­‰å¤šä¸ªå¹³å°
- ğŸ”„ **æ™ºèƒ½æ¨é€**ï¼šæ”¯æŒå¿«è¿›åˆå¹¶ã€å¼ºåˆ¶æ¨é€ã€force-with-lease ç­‰å¤šç§ç­–ç•¥
- ğŸ·ï¸ **å…¨é‡åŒæ­¥**ï¼šæ”¯æŒåŒæ­¥æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾åˆ°æŒ‡å®šä»“åº“
- ğŸ›¡ï¸ **é”™è¯¯å®¹å¿**ï¼šå•ä¸ªä»“åº“å¤±è´¥ä¸å½±å“å…¶ä»–ä»“åº“çš„æ¨é€
- âš¡ **è½»é‡é«˜æ•ˆ**ï¼šå‘½ä»¤è¡Œå·¥å…·ï¼Œå¿«é€Ÿç®€æ´
- ğŸŒ **çµæ´»é…ç½®**ï¼šæ”¯æŒå¤šç§ URL æ ¼å¼å’Œè¿œç¨‹ä»“åº“å‘½å
- ğŸ“¦ **å…¨å±€å®‰è£…**ï¼šä¸€æ¬¡å®‰è£…ï¼Œæ‰€æœ‰é¡¹ç›®å¯ç”¨
- ğŸ” **çŠ¶æ€æŸ¥çœ‹**ï¼šå®æ—¶æŸ¥çœ‹é…ç½®å’ŒåŒæ­¥çŠ¶æ€

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…¨å±€å®‰è£…
npm install -g git-multi-sync-tool
```

### ä½¿ç”¨

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/your/project

# 2. åˆ›å»ºé…ç½®æ–‡ä»¶
git-sync init

# 3. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ è¿œç¨‹ä»“åº“URLï¼ˆ.git-remotes.txtï¼‰
# https://github.com/username/repo1.git
# https://gitee.com/username/repo1.git
# [backup] https://gitlab.com/username/repo1.git

# 4. æŸ¥çœ‹é…ç½®
git-sync config

# 5. è®¾ç½®è¿œç¨‹ä»“åº“ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
git-sync setup

# 6. æ¨é€åˆ°æ‰€æœ‰ä»“åº“
git-sync push
```

## ğŸ“‹ é…ç½®æ–‡ä»¶ç¤ºä¾‹

ç¼–è¾‘ `.git-remotes.txt` æ–‡ä»¶ï¼š

```text
# Gitå¤šä»“åº“åŒæ­¥é…ç½®
# æ¯è¡Œä¸€ä¸ªè¿œç¨‹ä»“åº“URL
# å¯é€‰ï¼šä½¿ç”¨æ–¹æ‹¬å·æˆ–ç›´æ¥å‘½åè¿œç¨‹ä»“åº“
# ä»¥ # å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Š

https://github.com/yourname/project.git
https://gitee.com/yourname/project.git
[backup] https://gitlab.com/yourname/project.git
company http://git.company.com/team/project.git
#disabled https://disabled.repo.git

# æ”¯æŒç›¸åŒä»“åº“çš„å¤šä¸ª URLï¼Œè‡ªåŠ¨åˆå¹¶ä¸º push URL
origin https://github.com/user/repo.git
origin-2 https://gitee.com/user/repo.git
```

## ğŸ“š å®Œæ•´å‘½ä»¤å‚è€ƒ

### åŸºç¡€å‘½ä»¤

| å‘½ä»¤     | è¯´æ˜                     | ç¤ºä¾‹              |
| -------- | ------------------------ | ----------------- |
| `init`   | åˆ›å»ºç¤ºä¾‹é…ç½®æ–‡ä»¶         | `git-sync init`   |
| `config` | æ˜¾ç¤ºå½“å‰é…ç½®             | `git-sync config` |
| `setup`  | æ ¹æ®é…ç½®æ–‡ä»¶è®¾ç½®è¿œç¨‹ä»“åº“ | `git-sync setup`  |
| `status` | æŸ¥çœ‹åŒæ­¥çŠ¶æ€             | `git-sync status` |

### æäº¤å’Œæ¨é€

| å‘½ä»¤               | è¯´æ˜               | ç¤ºä¾‹                                      |
| ------------------ | ------------------ | ----------------------------------------- |
| `commit <message>` | æäº¤ä»£ç åˆ°æ‰€æœ‰ä»“åº“ | `git-sync commit "feat: add new feature"` |
| `push`             | æ¨é€åˆ°æ‰€æœ‰ä»“åº“     | `git-sync push`                           |

**commit å‘½ä»¤é€‰é¡¹**ï¼š

- `-p, --push` - æäº¤åè‡ªåŠ¨æ¨é€
- `-a, --all` - æäº¤æ‰€æœ‰æ›´æ”¹
- `-f, --force` - å¼ºåˆ¶æ¨é€
- `-u, --set-upstream` - è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯
- `--force-with-lease` - ä½¿ç”¨æ›´å®‰å…¨çš„å¼ºåˆ¶æ¨é€
- `--pull-before-push` - æ¨é€å‰å…ˆè·å–å¹¶å¿«è¿›åˆå¹¶
- `--on-non-ff <strategy>` - éå¿«è¿›ç­–ç•¥ï¼šskip|rebase|force-with-lease|force

**push å‘½ä»¤é€‰é¡¹**ï¼š

- `-f, --force` - å¼ºåˆ¶æ¨é€
- `-u, --set-upstream` - è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯
- `--force-with-lease` - ä½¿ç”¨æ›´å®‰å…¨çš„å¼ºåˆ¶æ¨é€
- `--pull-before-push` - æ¨é€å‰å…ˆè·å–å¹¶å¿«è¿›åˆå¹¶
- `--on-non-ff <strategy>` - éå¿«è¿›ç­–ç•¥ï¼šskip|rebase|force-with-lease|force

### æ‹‰å–å’Œè·å–

| å‘½ä»¤    | è¯´æ˜               | ç¤ºä¾‹             |
| ------- | ------------------ | ---------------- |
| `pull`  | ä»æ‰€æœ‰ä»“åº“æ‹‰å–     | `git-sync pull`  |
| `fetch` | ä»æ‰€æœ‰ä»“åº“è·å–æ›´æ–° | `git-sync fetch` |

**pull å‘½ä»¤é€‰é¡¹**ï¼š

- `-r, --rebase` - ä½¿ç”¨ rebase æ–¹å¼åˆå¹¶
- `--merge-mirrors` - å¯¹é•œåƒè¿œç¨‹æ‰§è¡Œåˆå¹¶ï¼ˆé»˜è®¤ä»… fetchï¼‰

### å…¨é‡åŒæ­¥ï¼ˆæ–°å¢åŠŸèƒ½ âœ¨ï¼‰

| å‘½ä»¤                    | è¯´æ˜                         | ç¤ºä¾‹                             |
| ----------------------- | ---------------------------- | -------------------------------- |
| `sync-all <target-url>` | åŒæ­¥æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾åˆ°æŒ‡å®šä»“åº“ | `git-sync sync-all <target-url>` |

**sync-all å‘½ä»¤é€‰é¡¹**ï¼š

- `-s, --source <remote>` - æŒ‡å®šæºè¿œç¨‹ä»“åº“åç§°ï¼ˆé»˜è®¤: originï¼‰
- `-f, --force` - å¼ºåˆ¶æ¨é€
- `--force-with-lease` - ä½¿ç”¨æ›´å®‰å…¨çš„å¼ºåˆ¶æ¨é€

**ä½¿ç”¨åœºæ™¯ç¤ºä¾‹**ï¼š

```bash
# å°† origin çš„æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾åŒæ­¥åˆ°å¤‡ä»½ä»“åº“
git-sync sync-all https://backup.company.com/repo.git

# å°† upstream çš„æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾åŒæ­¥åˆ°ç›®æ ‡ä»“åº“
git-sync sync-all https://target.com/repo.git -s upstream

# å¼ºåˆ¶è¦†ç›–ç›®æ ‡ä»“åº“ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git-sync sync-all https://target.com/repo.git --force
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å¤šå¹³å°åŒæ­¥

åŒæ—¶å°†ä»£ç æ¨é€åˆ° GitHubã€Giteeã€GitLab ç­‰å¤šä¸ªå¹³å°ï¼š

```bash
git-sync push
```

### åœºæ™¯ 2: æäº¤å¹¶æ¨é€

ä¸€æ¬¡æ€§å®Œæˆæäº¤å’Œæ¨é€åˆ°æ‰€æœ‰ä»“åº“ï¼š

```bash
git-sync commit "feat: new feature" -p
```

### åœºæ™¯ 3: å…¨é‡ä»“åº“å¤‡ä»½

å°†ä¸»ä»“åº“çš„æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾å¤‡ä»½åˆ°å¤‡ä»½ä»“åº“ï¼š

```bash
git-sync sync-all https://backup.company.com/repo.git
```

### åœºæ™¯ 4: å®‰å…¨å¼ºåˆ¶æ¨é€

ä½¿ç”¨æ›´å®‰å…¨çš„ force-with-lease æ¨é€ï¼š

```bash
git-sync push --force-with-lease
```

### åœºæ™¯ 5: æ¨é€å‰è‡ªåŠ¨åˆå¹¶

æ¨é€å‰å…ˆå°è¯•ä»è¿œç¨‹è·å–å¹¶åˆå¹¶ï¼š

```bash
git-sync push --pull-before-push --on-non-ff rebase
```

### åœºæ™¯ 6: ç¦ç”¨æŸäº›ä»“åº“

ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„æ³¨é‡ŠåŠŸèƒ½ä¸´æ—¶ç¦ç”¨æŸäº›ä»“åº“ï¼š

```text
# https://temp-disabled.repo.git
```

## âš™ï¸ é«˜çº§é…ç½®

### åˆ†ç»„è¿œç¨‹ä»“åº“

ç›¸åŒçš„ä»“åº“åï¼ˆè‡ªåŠ¨å»é™¤ `-æ•°å­—` åç¼€ï¼‰ä¼šè¢«è§†ä¸ºåŒä¸€ç»„ï¼Œåç»­çš„ URL ä¼šè‡ªåŠ¨æ·»åŠ ä¸º push URLï¼š

```text
origin https://github.com/user/repo.git
origin-2 https://gitee.com/user/repo.git
origin-3 https://gitlab.com/user/repo.git
```

æ•ˆæœï¼šfetch ä»…ä» originï¼Œä½† push ä¼šåŒæ—¶æ¨é€åˆ°æ‰€æœ‰ä¸‰ä¸ªåœ°å€ã€‚

### éå¿«è¿›ç­–ç•¥

å½“æœ¬åœ°åˆ†æ”¯è½åäºè¿œç¨‹åˆ†æ”¯æ—¶ï¼Œå¯é€‰æ‹©ä»¥ä¸‹ç­–ç•¥ï¼š

- `skip` (é»˜è®¤) - è·³è¿‡æ¨é€
- `rebase` - è‡ªåŠ¨ rebase åæ¨é€
- `force-with-lease` - å®‰å…¨å¼ºåˆ¶æ¨é€
- `force` - å¼ºåˆ¶æ¨é€ï¼ˆå±é™©ï¼‰

## ğŸ”§ æ•…éšœæ’é™¤

### é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°

ç¡®ä¿åœ¨ Git é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œå‘½ä»¤ï¼Œå¹¶ä¸”å·²æ‰§è¡Œ `git-sync init`ã€‚

### è¿œç¨‹ä»“åº“è®¾ç½®å¤±è´¥

æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ŒURL æ˜¯å¦æœ‰æ•ˆã€‚è¿è¡Œ `git-sync config` æŸ¥çœ‹è¯¦ç»†é…ç½®ã€‚

### æ¨é€å¤±è´¥

- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯è¿œç¨‹ä»“åº“æƒé™
- å°è¯•ä½¿ç”¨ `--force-with-lease` é€‰é¡¹
- ä½¿ç”¨ `--pull-before-push` å…ˆåŒæ­¥è¿œç¨‹æ›´æ”¹

### åˆ†æ”¯æˆ–æ ‡ç­¾å†²çª

ä½¿ç”¨ `--force` æˆ– `--force-with-lease` é€‰é¡¹è¦†ç›–è¿œç¨‹åˆ†æ”¯/æ ‡ç­¾ã€‚

## ğŸ“¦ é¡¹ç›®ä¿¡æ¯

- **åç§°**: git-multi-sync-tool
- **ç‰ˆæœ¬**: 1.0.3
- **ä»“åº“**: https://github.com/YangHuangYao/git-sync-tool
- **é—®é¢˜åé¦ˆ**: https://github.com/YangHuangYao/git-sync-tool/issues
- **è®¸å¯è¯**: MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œ Pull Requestï¼

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.3

- âœ¨ æ–°å¢ `sync-all` å‘½ä»¤ï¼šåŒæ­¥æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾åˆ°æŒ‡å®šä»“åº“
- ğŸ”§ ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæç¤ºä¿¡æ¯
- ğŸ“š å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

### v1.0.0

- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ“ åŸºç¡€å¤šä»“åº“åŒæ­¥åŠŸèƒ½
- ğŸŒ æ”¯æŒ GitHubã€Giteeã€GitLab ç­‰å¹³å°

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶
